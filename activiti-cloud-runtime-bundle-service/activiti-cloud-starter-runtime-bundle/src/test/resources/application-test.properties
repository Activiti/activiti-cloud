spring.main.banner-mode=off
logging.level.root=WARN

spring.application.name=test-app
activiti.cloud.application.name=activiti-app

# Let's disable job executor for running common IT tests to avoid Travis CI timing problems
spring.activiti.asyncExecutorActivate=false

spring.cloud.stream.default.contentType=application/json

spring.cloud.stream.function.definition=commandProcessor;myCmdResults;signalConsumer;auditConsumer\
  ;integrationEventsConsumer;restConnectorConsumer;varMappingIntegrationEventsConsumer\
  ;constantsIntegrationEventsConsumer;mealsConnectorConsumer;valueProcessorConsumer\
  ;integrationErrorsConsumer;integrationResultsConsumer;canFailConnector

# test command results bindings
spring.cloud.stream.bindings.myCmdResults-in-0.destination=commandResults
spring.cloud.stream.bindings.myCmdResults-in-0.group=${activiti.cloud.application.name}
spring.cloud.stream.bindings.myCmdResults-in-0.contentType=application/json

# test command producer bindings
spring.cloud.stream.bindings.myCmdProducer-out-0.destination=commandConsumer
spring.cloud.stream.bindings.myCmdProducer-out-0.contentType=application/json

# test audit consumer binding
spring.cloud.stream.bindings.auditConsumer-in-0.destination=engineEvents
spring.cloud.stream.bindings.auditConsumer-in-0.group=audit
spring.cloud.stream.bindings.auditConsumer-in-0.contentType=application/json

# connector subscriber (receive integration request)
spring.cloud.stream.bindings.integrationEventsConsumer-in-0.destination=payment
spring.cloud.stream.bindings.integrationEventsConsumer-in-0.group=integration
spring.cloud.stream.bindings.integrationEventsConsumer-in-0.contentType=application/json

# variable mapping connector
spring.cloud.stream.bindings.varMappingIntegrationEventsConsumer-in-0.destination=Variable Mapping Connector.variableMappingActionName
spring.cloud.stream.bindings.varMappingIntegrationEventsConsumer-in-0.group=integration
spring.cloud.stream.bindings.varMappingIntegrationEventsConsumer-in-0.contentType=application/json

# constants connector
spring.cloud.stream.bindings.constantsIntegrationEventsConsumer-in-0.destination=Constants Connector.constantsActionName
spring.cloud.stream.bindings.constantsIntegrationEventsConsumer-in-0.group=integration
spring.cloud.stream.bindings.constantsIntegrationEventsConsumer-in-0.contentType=application/json

# multi-instance result collection connector
spring.cloud.stream.bindings.mealsConnectorConsumer-in-0.destination=mealsConnector
spring.cloud.stream.bindings.mealsConnectorConsumer-in-0.group=integration
spring.cloud.stream.bindings.mealsConnectorConsumer-in-0.contentType=application/json

spring.cloud.stream.bindings.restConnectorConsumer-in-0.destination=rest.GET
spring.cloud.stream.bindings.restConnectorConsumer-in-0.group=integration
spring.cloud.stream.bindings.restConnectorConsumer-in-0.contentType=application/json

spring.cloud.stream.bindings.valueProcessorConsumer-in-0.destination=value-processor.process
spring.cloud.stream.bindings.valueProcessorConsumer-in-0.group=integration
spring.cloud.stream.bindings.valueProcessorConsumer-in-0.contentType=application/json

# can fail connector
spring.cloud.stream.bindings.canFailConnector-in-0.destination=connector.canFail
spring.cloud.stream.bindings.canFailConnector-in-0.group=integration
spring.cloud.stream.bindings.canFailConnector-in-0.contentType=application/json


activiti.identity.test-user=hruser
activiti.identity.test-password=password

authorizations.security-constraints[0].authRoles[0]=ACTIVITI_USER
authorizations.security-constraints[0].securityCollections[0].patterns[0]=/v1/*
authorizations.security-constraints[1].authRoles[0]=ACTIVITI_ADMIN
authorizations.security-constraints[1].securityCollections[0].patterns[0]=/admin/*

# project manifest path
project.manifest.file.path=classpath:/default-project.json
spring.zipkin.enabled=false

# Enable message partitioning configuration for test
activiti.cloud.messaging.partitioned=true
activiti.cloud.messaging.instance-index=0
activiti.cloud.messaging.partition-count=1

# Test partitioned consumer properties
spring.cloud.stream.bindings.queryConsumer-in-0.consumer.partitioned=${activiti.cloud.messaging.partitioned}
spring.cloud.stream.bindings.auditConsumer-in-0.consumer.partitioned=${activiti.cloud.messaging.partitioned}
